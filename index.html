<HTML>
<head>
    <meta name="viewport" content="width=device-width">
    <link rel="icon" href="https://www.citypng.com/public/uploads/preview/js-javascript-round-logo-icon-png-7017516947717339mnyf7eumy.png">
    <title>Js-Editor</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
</head>
<style>
    #todo{
margin: 5px;

    }
#teditor{
    padding:5px;
width:100%;
height:45%;
//background-color: red;;
//color: white;

}
#display{
    padding: 5px;
width:100%;
height:45%;
//background-color: blue;
////color: white;
}
#dtesting{
 
    height:45%;
    position:absolute;
    top:55%;
    width: 98%;
    background-color: red;
    border-style: solid;;
    display:none;
}
</style>
<div id=""todo">
<textarea id="teditor" placeholder="Type your codes here...(for your variables use var *recommended)"></textarea>
<button onclick="procesar(teditor.value)">Process</button>
<select id="sselopc" oninput="selopc(this.value)"> 
 
    <option>Select Option</option>
     <option>Save project</option>
      <option>Delete actual project</option>
      <option>Show div testing</option>
       <option>Hide div testing</option>    
<option></option>
     <option>Delete all projects</option>    
</select>
<select id="spr" oninput="selPr(this.value)">
    <option>Select Prtoject</option>
 
</select>
<textarea id="display" placeholder="This variable is 'display', to shoe results use ' display.value=Your_Variable,**To handle div Testing use 'dtesting' variable'"></textarea>

</div>>
<div id="dtesting"></div>

<script>
arpr=[];
//localStorage.removeItem("projects")
    var ll=localStorage.getItem("projects");
    if(ll!=null){
 
arpr=JSON.parse(ll);


    } 

setuppr();
    function setuppr(){
    spr.innerHTML="<option>Select a project</option>"
    for(var i=0;i<arpr.length;i++){
        e=arpr[i];
  
        spr.innerHTML+="<option>"+e.name+"</option>"
  
    }
  
    }

function procesar(v){
    eval(v)
}
function selPr(v){
     var ind=verifypr(v);
 
    if(ind>-1) {
     //   alert(JSON.stringify(arpr[ind]))
        teditor.value=arpr[ind].cont;
        procesar(teditor.value);
        selPr.value="Select a project";
    }
}
function selopc(v){
    if(v==="Show div testing") dtesting.style.display="inline-block"
   if(v==="Hide div testing") dtesting.style.display="none"

    if(v==="Delete all projects"){

        if(confirm("Are you sure you want to delete all projects?")){
            if(confirm("I am ready to delete all projects, proceed?")) localStorage.removeItem("projects");
        }
    }
    if(v==="Delete actual project"){
   
        if(confirm("Are you sure you want to delete "+spr.value+" Project?")){
            var ind=verifypr(spr.value);
            if(ind>-1) {
              
                if(confirm("I am ready to delete "+v+" project, proceed?")){ 
                     arpr.splice(ind,1);  
                localStorage.setItem("projects",JSON.stringify(arpr));
                alert("Project has been deleted, app will restart");
                window.location.reload();

            }
            }
        }

    }
if(v==="Save project"){

    var n=prompt("Type project name");
    var ind=verifypr(n)
    if(ind===-1){
  
var o={};
o.name=n;
o.cont=teditor.value;
arpr.push(o);
//alert(JSON.stringify(arpr));
localStorage.setItem("projects",JSON.stringify(arpr));
alert("Project "+n+" has been saved locally")
setuppr();

    }
else {
    if(confirm("Project already exist, do you want to replace it?")){
        arpr[ind].cont=teditor.value;
     localStorage.setItem("projects",JSON.stringify(arpr));   
     alert("Project "+n+" has been updated");

    }

}

}
}

function verifypr(v){
      for(var i=0;i<arpr.length;i++){
        var e=arpr[i];
        if(e.name===v){
            return i;
        }
    }
    return -1;
}







    function GetJ(url, callback) {

            //var url  = "http://localhost:8080/api/v1/users";
            var xhr = new XMLHttpRequest()
            xhr.open('GET', url + '/1', true)
            xhr.onload = function() {
                //         (xhr.responseText)
                var users = JSON.parse(xhr.responseText);
                //     var obb=decoding(users.prim);

                if (xhr.readyState == 4 && xhr.status == "200") {
                    callback(users);
                } else {
                    console.error(users);
                }
            }
            xhr.send(null);
        }

         // Update a user
        function UpdateJ(url, ob, callback) {

            json = JSON.stringify(ob);
            var xhr = new XMLHttpRequest();
            xhr.open("PUT", url + '/12', true);
            xhr.setRequestHeader('Content-type', 'application/json; charset=utf-8');
            xhr.onload = function() {
                var users = JSON.parse(xhr.responseText);
                if (xhr.readyState == 4 && xhr.status == "200") {
                    //  alert("Tu Forma ha sido Enviada");
                    if (callback != undefined) callback(users);
                } else {
                    (users);
                }
            }
            xhr.send(json);
        }



</script>
</HTML>
